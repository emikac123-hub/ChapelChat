databaseChangeLog:
  - changeSet:
      id: 1-create-church
      author: chapelchat
      changes:
        - createTable:
            tableName: church
            columns:
              - column:
                  name: id
                  type: VARCHAR(255)
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: name
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
              - column:
                  name: allowed_origin
                  type: VARCHAR(255)

  - changeSet:
      id: 2-create-api-key
      author: chapelchat
      changes:
        - createTable:
            tableName: api_keys
            columns:
              - column:
                  name: id
                  type: UUID
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: api_key
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
                    unique: true
              - column:
                  name: church_id
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
              - column:
                  name: is_active
                  type: boolean
                  constraints:
                    nullable: false
        - addForeignKeyConstraint:
            baseTableName: api_keys
            baseColumnNames: church_id
            referencedTableName: church
            referencedColumnNames: id
            constraintName: fk_api_church

  - changeSet:
      id: 3-create-app-user
      author: chapelchat
      changes:
        - createTable:
            tableName: app_user
            columns:
              - column:
                  name: id
                  type: BIGINT
                  autoIncrement: true
                  constraints:
                    primaryKey: true
                    nullable: false
              - column:
                  name: username
                  type: VARCHAR(255)
                  constraints:
                    unique: true
                    nullable: false
              - column:
                  name: password
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
              - column:
                  name: role
                  type: VARCHAR(50)
                  constraints:
                    nullable: false
              - column:
                  name: church_id
                  type: VARCHAR(255)
                  constraints:
                    nullable: false
        - addForeignKeyConstraint:
            baseTableName: app_user
            baseColumnNames: church_id
            referencedTableName: church
            referencedColumnNames: id
            constraintName: fk_user_church

  - changeSet:
      id: 4-seed-hope-baptist
      author: chapelchat
      changes:
        - insert:
            tableName: church
            columns:
              - column:
                  name: id
                  value: hope-baptist
              - column:
                  name: name
                  value: Hope Baptist Church
              - column:
                  name: allowed_origin
                  value: https://hopebaptist.example.org
        - insert:
            tableName: api_keys
            columns:
              - column:
                  name: id
                  value: 8b642f30-9c39-4b63-9eb9-1a9fe6eeb408  # ‚Üê add this
              - column:
                  name: api_key
                  value: chapel_a8ab9839-90ba-451d-94d8-cce7fded85d0
              - column:
                  name: church_id
                  value: hope-baptist
              - column:
                  name: is_active
                  value: "true"
